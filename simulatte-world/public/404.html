<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>404 - Lost in the Simulatte</title>
    <style>
      :root {
        --glitch-color-1: #0f0;
        --glitch-color-2: #f0f;
        --glitch-color-3: #0ff;
        --text-color: #eee;
        --accent-color: #0f0;
        --bg-color: #000;
        --border-color: #555;
      }
      html,
      body {
        margin: 0;
        overflow: hidden;
        background: var(--bg-color);
        color: var(--text-color);
        font-family: "Courier New", Courier, monospace;
        text-align: center;
        height: 100vh;
        width: 100vw;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
      }
      .starfield-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 1;
      }
      .star {
        position: absolute;
        background-color: white;
        border-radius: 50%;
        transition: opacity 0.5s linear;
      }
      @keyframes twinkle {
        0% {
          opacity: 0.2;
          transform: scale(0.7);
        }
        50% {
          opacity: 0.9;
          transform: scale(1.1);
        }
        100% {
          opacity: 0.2;
          transform: scale(0.7);
        }
      }
      .twinkle {
        animation: twinkle 3s linear infinite alternate;
      }
      .twinkle-1 {
        animation-duration: 2.8s;
        animation-delay: -0.2s;
      }
      .twinkle-2 {
        animation-duration: 3.8s;
        animation-delay: -1.5s;
      }
      .twinkle-3 {
        animation-duration: 4.8s;
        animation-delay: -2.8s;
      }
      .content-wrapper {
        position: relative;
        z-index: 10;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        background: rgba(0, 0, 0, 0.3);
        border: 1px dashed var(--border-color);
        backdrop-filter: blur(2px);
      }
      #e {
        font-size: clamp(4em, 15vw, 10em);
        color: var(--accent-color);
        padding: 10px 20px;
        margin-bottom: 10px;
        position: relative;
        text-shadow: 0 0 5px var(--accent-color), 0 0 10px var(--accent-color);
        transition: transform 0.1s ease-out, text-shadow 0.1s ease-out;
        border: 2px dotted var(--border-color);
        user-select: none;
      }
      #m {
        font-size: clamp(1em, 4vw, 1.8em);
        color: var(--text-color);
        padding: 5px 15px;
        margin-top: 10px;
        margin-bottom: 20px;
        border: 1px dotted var(--border-color);
        user-select: none;
      }
      .fun-messages {
        margin-top: 15px;
        font-size: clamp(0.8em, 2.5vw, 1.1em);
        color: #bbb;
        max-width: 80%;
        user-select: none;
      }
      .fun-messages p {
        margin: 5px 0;
        opacity: 0.8;
      }
      #home-button {
        font-family: "Courier New", Courier, monospace;
        font-size: clamp(1em, 3.5vw, 1.5em);
        color: var(--bg-color);
        background-color: var(--accent-color);
        border: 2px solid var(--accent-color);
        padding: 12px 25px;
        margin-top: 25px;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.2s ease-in-out;
        box-shadow: 0 0 8px var(--accent-color);
        font-weight: bold;
      }
      #home-button:hover,
      #home-button:focus {
        background-color: var(--bg-color);
        color: var(--accent-color);
        box-shadow: 0 0 15px var(--accent-color), 0 0 25px var(--accent-color);
        transform: scale(1.05);
      }
      #home-button:active {
        transform: scale(0.98);
        box-shadow: 0 0 5px var(--accent-color);
      }
      @keyframes textGlitch {
        0% {
          transform: translate(0);
          text-shadow: 0 0 5px var(--accent-color);
        }
        20% {
          transform: translate(-3px, 2px) skewX(-5deg);
          text-shadow: -2px 0 3px var(--glitch-color-1),
            2px 0 3px var(--glitch-color-2);
        }
        40% {
          transform: translate(2px, -3px) skewX(3deg);
          text-shadow: 2px 0 3px var(--glitch-color-2),
            -2px 0 3px var(--glitch-color-3);
        }
        60% {
          transform: translate(-1px, 1px) skewX(-2deg);
          text-shadow: -1px 0 3px var(--glitch-color-3),
            1px 0 3px var(--glitch-color-1);
        }
        80% {
          transform: translate(1px, -1px) skewX(1deg);
          text-shadow: 0 0 8px var(--accent-color), 0 0 15px var(--accent-color);
        }
        100% {
          transform: translate(0);
          text-shadow: 0 0 5px var(--accent-color);
        }
      }
      .glitching #e,
      .glitching #m {
        animation: textGlitch 0.2s infinite linear alternate-reverse;
      }
      .glitching .content-wrapper {
        border-color: var(--glitch-color-1);
        box-shadow: inset 0 0 10px var(--glitch-color-2);
      }
    </style>
  </head>
  <body>
    <div class="starfield-bg"></div>

    <div class="content-wrapper">
      <div id="e">404</div>
      <div id="m">Page Not Found</div>
      <div class="fun-messages">
        <p>Hmm, this isn't the data stream you're looking for.</p>
        <p>Maybe a typo in the nav-coordinates?</p>
        <p>Or perhaps it drifted into the digital ether...</p>
        <p>Reality matrix unstable at this location.</p>
      </div>
      <a href="/" id="home-button">THERE'S NO PLACE LIKE ::1</a>
    </div>

    <script>
      const starfieldContainer = document.querySelector(".starfield-bg");
      const contentWrapper = document.querySelector(".content-wrapper");
      const error404Element = document.getElementById("e");
      const originalErrorText = error404Element.textContent;

      let stars = [];
      let width = window.innerWidth;
      let height = window.innerHeight;
      let starfieldAnimationId;
      let glitchIntervalId = null;
      let vortexCycleTimeoutId = null;

      let config = {
        numStars: 300,
        warpSpeed: 0.6,
        vortexMode: false,
        vortexStrength: 0.015,
        starTwinkle: true,
        minStarSize: 0.5,
        maxStarSize: 2.0,

        glitchChance: 0.1,
        minGlitchDuration: 150,
        maxGlitchDuration: 500,
        minGlitchInterval: 3000,
        maxGlitchInterval: 8000,

        vortexCycleDuration: 10000,
      };

      function random(min, max) {
        return Math.random() * (max - min) + min;
      }
      function randomInt(min, max) {
        return Math.floor(random(min, max + 1));
      }

      function resizeHandler() {
        width = window.innerWidth;
        height = window.innerHeight;
      }
      window.addEventListener("resize", resizeHandler);

      function createStar() {
        const star = document.createElement("div");
        star.classList.add("star");
        const size = random(config.minStarSize, config.maxStarSize);
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        star.dataset.size = size;
        const x = random(0, width);
        const y = random(0, height);
        const z = random(0.1, 1);
        star.style.left = `${x}px`;
        star.style.top = `${y}px`;
        star.style.opacity = 0;
        if (config.starTwinkle)
          star.classList.add("twinkle", `twinkle-${randomInt(1, 3)}`);
        starfieldContainer.appendChild(star);
        return { el: star, x, y, z, opacity: 0, targetOpacity: random(0.4, 1) };
      }

      function resetStar(star) {
        star.x = width / 2 + random(-30, 30);
        star.y = height / 2 + random(-30, 30);
        star.z = random(0.1, 1);
        star.targetOpacity = random(0.4, 1);
        star.opacity = 0;
        star.el.style.opacity = 0;
        const size = random(config.minStarSize, config.maxStarSize);
        star.el.style.width = `${size}px`;
        star.el.style.height = `${size}px`;
        star.el.dataset.size = size;
        star.el.style.transform = `scale(1)`;
        const needsTwinkle = config.starTwinkle;
        const hasTwinkle = star.el.classList.contains("twinkle");
        if (needsTwinkle && !hasTwinkle) {
          star.el.classList.add("twinkle", `twinkle-${randomInt(1, 3)}`);
        } else if (!needsTwinkle && hasTwinkle) {
          star.el.classList.remove(
            "twinkle",
            "twinkle-1",
            "twinkle-2",
            "twinkle-3"
          );
        } else if (needsTwinkle && hasTwinkle) {
          star.el.className = "star twinkle " + `twinkle-${randomInt(1, 3)}`;
        }
      }

      function updateStar(star) {
        const centerX = width / 2;
        const centerY = height / 2;
        let dx = star.x - centerX;
        let dy = star.y - centerY;
        const distFromCenter = Math.sqrt(dx * dx + dy * dy) || 1;
        const speed = (1 / star.z) * config.warpSpeed;

        if (config.vortexMode) {
          let angle = Math.atan2(dy, dx);
          angle += config.vortexStrength * speed * 5;
          const moveDist = speed * 4;
          star.x = centerX + (distFromCenter + moveDist) * Math.cos(angle);
          star.y = centerY + (distFromCenter + moveDist) * Math.sin(angle);
        } else {
          const moveX = (dx / distFromCenter) * speed * 4;
          const moveY = (dy / distFromCenter) * speed * 4;
          star.x += moveX;
          star.y += moveY;
        }
        if (star.opacity < star.targetOpacity)
          star.opacity = Math.min(star.targetOpacity, star.opacity + 0.05);
        star.el.style.opacity = star.opacity;
        if (!config.starTwinkle) {
          const maxDist = Math.sqrt(centerX * centerX + centerY * centerY);
          const scale = 1 + (distFromCenter / maxDist) * 1.2;
          star.el.style.transform = `scale(${scale})`;
        }
        star.el.style.left = `${star.x}px`;
        star.el.style.top = `${star.y}px`;
        if (
          star.x < -100 ||
          star.x > width + 100 ||
          star.y < -100 ||
          star.y > height + 100
        ) {
          resetStar(star);
        }
      }

      function manageStars() {
        while (stars.length < config.numStars) stars.push(createStar());
        while (stars.length > config.numStars) {
          const removedStar = stars.pop();
          if (removedStar.el) removedStar.el.remove();
        }
        stars.forEach((star) => {
          const needsTwinkle = config.starTwinkle;
          const hasTwinkle = star.el.classList.contains("twinkle");
          if (needsTwinkle && !hasTwinkle) {
            star.el.classList.add("twinkle", `twinkle-${randomInt(1, 3)}`);
          } else if (!needsTwinkle && hasTwinkle) {
            star.el.classList.remove(
              "twinkle",
              "twinkle-1",
              "twinkle-2",
              "twinkle-3"
            );
            star.el.style.transform = "scale(1)";
          }
        });
      }

      function animateStarfield() {
        stars.forEach(updateStar);
        starfieldAnimationId = requestAnimationFrame(animateStarfield);
      }

      function initStarfield() {
        manageStars();
        if (starfieldAnimationId) cancelAnimationFrame(starfieldAnimationId);
        animateStarfield();
      }

      function triggerGlitch() {
        if (contentWrapper.classList.contains("glitching")) return;
        const glitchDuration = random(
          config.minGlitchDuration,
          config.maxGlitchDuration
        );
        contentWrapper.classList.add("glitching");
        let scrambleInterval = setInterval(() => {
          error404Element.textContent = Array.from(
            { length: originalErrorText.length },
            () =>
              Math.random() > 0.5
                ? String.fromCharCode(randomInt(33, 126))
                : originalErrorText[randomInt(0, originalErrorText.length - 1)]
          ).join("");
        }, 50);
        const originalWarp = config.warpSpeed;
        config.warpSpeed *= random(1.5, 3);
        setTimeout(() => {
          contentWrapper.classList.remove("glitching");
          clearInterval(scrambleInterval);
          error404Element.textContent = originalErrorText;
          config.warpSpeed = originalWarp;
          scheduleNextGlitch();
        }, glitchDuration);
      }

      function scheduleNextGlitch() {
        clearTimeout(glitchIntervalId);
        const nextGlitchDelay = random(
          config.minGlitchInterval,
          config.maxGlitchInterval
        );
        glitchIntervalId = setTimeout(() => {
          if (Math.random() < config.glitchChance) {
            triggerGlitch();
          } else {
            scheduleNextGlitch();
          }
        }, nextGlitchDelay);
      }

      function cycleVortexMode() {
        clearTimeout(vortexCycleTimeoutId);
        config.vortexMode = !config.vortexMode;
        manageStars();
        vortexCycleTimeoutId = setTimeout(
          cycleVortexMode,
          config.vortexCycleDuration
        );
      }

      function init() {
        initStarfield();
        scheduleNextGlitch();
        cycleVortexMode();
        resizeHandler();
      }
      setTimeout(init, 100);
    </script>
  </body>
</html>
